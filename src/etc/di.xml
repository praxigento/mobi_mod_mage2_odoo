<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">

    <!-- API -->
    <preference for="\Praxigento\Odoo\Api\Customer\Pv\AddInterface" type="\Praxigento\Odoo\Api\Customer\Pv\Add"/>
    <preference for="Praxigento\Odoo\Api\ProductReplicatorInterface" type="Praxigento\Odoo\Api\Def\ProductReplicator"/>
    <preference for="Praxigento\Odoo\Api\SaleOrderReplicatorInterface" type="Praxigento\Odoo\Api\Def\SaleOrderReplicator"/>

    <!-- Data / API -->


    <!-- Console (CLI Commands) -->
    <type name="Magento\Framework\Console\CommandList">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="prxgt_odoo_replicate_products_command" xsi:type="object">Praxigento\Odoo\Console\Command\Replicate\Products</item>
            </argument>
        </arguments>
    </type>

    <!-- Repo -->
    <preference for="Praxigento\Odoo\Repo\IRegistry" type="Praxigento\Odoo\Repo\Def\Registry"/>
    <preference for="Praxigento\Odoo\Repo\IPv" type="\Praxigento\Odoo\Repo\Def\Pv"/>

    <!-- Repo / Agg -->
    <preference for="Praxigento\Odoo\Repo\Agg\ILot" type="Praxigento\Odoo\Repo\Agg\Def\Lot"/>
    <preference for="Praxigento\Odoo\Repo\Agg\ISaleOrderItem" type="Praxigento\Odoo\Repo\Agg\Def\SaleOrderItem"/>
    <preference for="Praxigento\Odoo\Repo\Agg\IWarehouse" type="Praxigento\Odoo\Repo\Agg\Def\Warehouse"/>

    <!-- Repo / Entity -->
    <preference for="\Praxigento\Odoo\Repo\Entity\Registry\IRequest" type="\Praxigento\Odoo\Repo\Entity\Registry\Def\Request"/>
    <preference for="Praxigento\Odoo\Repo\Entity\ICategory" type="Praxigento\Odoo\Repo\Entity\Def\Category"/>
    <preference for="Praxigento\Odoo\Repo\Entity\ILot" type="Praxigento\Odoo\Repo\Entity\Def\Lot"/>
    <preference for="Praxigento\Odoo\Repo\Entity\IProduct" type="Praxigento\Odoo\Repo\Entity\Def\Product"/>
    <preference for="Praxigento\Odoo\Repo\Entity\ISaleOrder" type="Praxigento\Odoo\Repo\Entity\Def\SaleOrder"/>
    <preference for="Praxigento\Odoo\Repo\Entity\IWarehouse" type="Praxigento\Odoo\Repo\Entity\Def\Warehouse"/>

    <!-- Odoo API repo : see "praxigento/mobi_app_generic_mage2/src/etc/di.xml" -->
    <!--<virtualType name="odooTestConfigParams" type="Praxigento\Odoo\Repo\Odoo\Connector\Config\Def\Params">-->
    <!--<arguments>-->
    <!--<argument xsi:type="array" name="arg1">-->
    <!--<item name="baseUri" xsi:type="string">http://lion.host.prxgt.com:8122</item>-->
    <!--<item name="dbName" xsi:type="string">odoo_mobi_test</item>-->
    <!--<item name="userName" xsi:type="string">magento</item>-->
    <!--<item name="userPassword" xsi:type="string">v5WzTHjLatKHLeTB</item>-->
    <!--&lt;!&ndash;<item name="userName" xsi:type="string">admin</item>&ndash;&gt;-->
    <!--&lt;!&ndash;<item name="userPassword" xsi:type="string">admin</item>&ndash;&gt;-->
    <!--</argument>-->
    <!--</arguments>-->
    <!--</virtualType>-->

    <preference for="Praxigento\Odoo\Repo\Odoo\IInventory" type="Praxigento\Odoo\Repo\Odoo\Def\Inventory"/>
    <preference for="Praxigento\Odoo\Repo\Odoo\ISaleOrder" type="Praxigento\Odoo\Repo\Odoo\Def\SaleOrder"/>
    <preference for="Praxigento\Odoo\Repo\Odoo\Connector\Config\IAuthentication" type="odooTestConfigParams"/>
    <preference for="Praxigento\Odoo\Repo\Odoo\Connector\Config\IConnection" type="odooTestConfigParams"/>
    <preference for="Praxigento\Odoo\Repo\Odoo\Connector\Api\ILogin" type="Praxigento\Odoo\Repo\Odoo\Connector\Api\Def\Login"/>

    <!-- ******* -->
    <!-- PLUGINS -->
    <!-- ******* -->
    <type name="Magento\Framework\View\Element\UiComponent\DataProvider\CollectionFactory">
        <!-- Add custom columns to the sales orders grid (is_in_odoo) -->
        <plugin name="praxigento_odoo_plugin" type="Praxigento\Odoo\Plugin\Framework\View\Element\UiComponent\DataProvider\CollectionFactory" sortOrder="100" disabled="false"/>
    </type>

    <!-- Services -->
    <preference for="Praxigento\Odoo\Service\IReplicate" type="Praxigento\Odoo\Service\Replicate\Call"/>

</config>
