<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">

    <!-- Logger -->
    <virtualType name="loggerOdoo" type="Praxigento\Logging\Logger">
        <arguments>
            <!-- Config file path is related to Magento 2 base directory. Absolute path can be used too. -->
            <argument name="configFile" xsi:type="string">var/log/logging.yaml</argument>
            <!-- Name of the logger in configuration file. Default: "odoo".  -->
            <argument name="loggerName" xsi:type="string">odoo</argument>
        </arguments>
    </virtualType>
    <type name="Praxigento\Odoo\Repo\Odoo\Connector\Rest">
        <arguments>
            <argument name="logger" xsi:type="object">loggerOdoo</argument>
        </arguments>
    </type>
    <type name="Praxigento\Odoo\Service\Replicate\Sub\Replicator\Product">
        <arguments>
            <argument name="logger" xsi:type="object">loggerOdoo</argument>
        </arguments>
    </type>

    <!-- API -->
    <preference for="Praxigento\Odoo\Api\ProductReplicatorInterface" type="Praxigento\Odoo\Api\Def\ProductReplicator"/>

    <!-- Data / API -->


    <!-- Console (CLI Commands) -->
    <type name="Magento\Framework\Console\CommandList">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="prxgt_odoo_replicate_products_command" xsi:type="object">Praxigento\Odoo\Console\Command\Replicate\Products</item>
            </argument>
        </arguments>
    </type>

    <!-- Repo -->
    <preference for="Praxigento\Odoo\Repo\IRegistry" type="Praxigento\Odoo\Repo\Def\Registry"/>
    <preference for="Praxigento\Odoo\Repo\IPv" type="\Praxigento\Odoo\Repo\Def\Pv"/>

    <!-- Repo / Agg -->
    <preference for="Praxigento\Odoo\Repo\Agg\ILot" type="Praxigento\Odoo\Repo\Agg\Def\Lot"/>
    <preference for="Praxigento\Odoo\Repo\Agg\ISaleOrderItem" type="Praxigento\Odoo\Repo\Agg\Def\SaleOrderItem"/>
    <preference for="Praxigento\Odoo\Repo\Agg\IWarehouse" type="Praxigento\Odoo\Repo\Agg\Def\Warehouse"/>

    <!-- Repo / Entity -->
    <preference for="Praxigento\Odoo\Repo\Entity\ICategory" type="Praxigento\Odoo\Repo\Entity\Def\Category"/>
    <preference for="Praxigento\Odoo\Repo\Entity\ILot" type="Praxigento\Odoo\Repo\Entity\Def\Lot"/>
    <preference for="Praxigento\Odoo\Repo\Entity\IProduct" type="Praxigento\Odoo\Repo\Entity\Def\Product"/>
    <preference for="Praxigento\Odoo\Repo\Entity\IWarehouse" type="Praxigento\Odoo\Repo\Entity\Def\Warehouse"/>

    <!-- Odoo API repo -->
    <virtualType name="odooTestConfigParams" type="Praxigento\Odoo\Repo\Odoo\Connector\Config\Def\Params">
        <arguments>
            <argument xsi:type="array" name="arg1">
                <item name="baseUri" xsi:type="string">http://lion.host.prxgt.com:8122</item>
                <item name="dbName" xsi:type="string">odoo_mobi_test</item>
                <item name="userName" xsi:type="string">magento</item>
                <item name="userPassword" xsi:type="string">v5WzTHjLatKHLeTB</item>
            </argument>
        </arguments>
    </virtualType>

    <preference for="Praxigento\Odoo\Repo\Odoo\IInventory" type="Praxigento\Odoo\Repo\Odoo\Def\Inventory"/>
    <preference for="Praxigento\Odoo\Repo\Odoo\ISaleOrder" type="Praxigento\Odoo\Repo\Odoo\Def\SaleOrder"/>
    <preference for="Praxigento\Odoo\Repo\Odoo\Connector\Config\IAuthentication" type="odooTestConfigParams"/>
    <preference for="Praxigento\Odoo\Repo\Odoo\Connector\Config\IConnection" type="odooTestConfigParams"/>
    <preference for="Praxigento\Odoo\Repo\Odoo\Connector\Api\ILogin" type="Praxigento\Odoo\Repo\Odoo\Connector\Api\Def\Login"/>


    <!-- Services -->
    <preference for="Praxigento\Odoo\Service\IReplicate" type="Praxigento\Odoo\Service\Replicate\Call"/>

</config>
